
[platformio]
default_envs = inkplate_6_release
  
[common]
lib_deps = 
    https://github.com/martinberlin/epdiy-rotation.git#idf-lib

# Adapt EPD_* constants to your epaper:
# CONFIG_EPD_BOARD_REVISION_LILYGO_T5_47=y
# CONFIG_EPD_BOARD_REVISION_V2_V3 is not set
# CONFIG_EPD_BOARD_REVISION_V4 is not set
# CONFIG_EPD_BOARD_REVISION_V5 is not set
build_flags =
  -std=gnu++17
  -Iinclude_global
  -D CONFIG_EPD_DISPLAY_TYPE_ED047TC1=1
  -D CONFIG_EPD_BOARD_REVISION_LILYGO_T5_47=1

build_unflags =
  -std=gnu++11

[inkplate_common]
platform               = espressif32
board                  = esp-wrover-kit
framework              = espidf
monitor_speed          = 115200
upload_speed           = 256000
monitor_filters        = colorize
board_build.partitions = partitions.csv
; CPU Frequency. Max for ESP32:
board_build.f_cpu = 240000000L

build_flags =
  -O3
  ${common.build_flags}
  -D DEBUGGING=1
  -D CONFIG_SPIRAM_CACHE_WORKAROUND
  -D EPUB_INKPLATE_BUILD=1
  -D EPUB_LINUX_BUILD=0
  -D INCLUDE_vTaskSuspend=1
  -D SHOW_TIMING=0
  -I lib/tools
  !/usr/bin/pkg-config --cflags --libs lib_freetype/lib/pkgconfig/freetype2.pc
build_unflags =
  ${common.build_unflags}
lib_extra_dirs =
  lib_esp32
board_build.embed_files =
  src/embed/favicon.ico
  src/embed/upload_script.html
lib_deps =
  ${common.lib_deps}

[env:inkplate_6_release]
; extra_scripts = pre:merge.py
extends     = inkplate_common
build_type  = release
build_flags =
  -D INKPLATE_6
  -D LOG_LOCAL_LEVEL=ESP_LOG_ERROR
  ${inkplate_common.build_flags}

[env:inkplate_6_debug]
; extra_scripts = pre:merge.py
extends     = inkplate_common
build_type  = release
build_flags =
  -D INKPLATE_6
  -D LOG_LOCAL_LEVEL=ESP_LOG_VERBOSE
  ${inkplate_common.build_flags}

[env:inkplate_6plus_release]
extends     = inkplate_common
build_type  = release
build_flags =
  -D INKPLATE_6PLUS
  -D LOG_LOCAL_LEVEL=ESP_LOG_ERROR
  ${inkplate_common.build_flags}

[env:inkplate_6plus_debug]
extends     = inkplate_common
build_type  = release
build_flags =
  -D INKPLATE_6PLUS
  -D LOG_LOCAL_LEVEL=ESP_LOG_VERBOSE
  ${inkplate_common.build_flags}

[env:inkplate_10_release]
extends     = inkplate_common
build_type  = release
build_flags =
  -D INKPLATE_10
  -D LOG_LOCAL_LEVEL=ESP_LOG_ERROR
  ${inkplate_common.build_flags}

[env:inkplate_10_debug]
extends     = inkplate_common
build_type  = release
build_flags =
  -D INKPLATE_10
  -D LOG_LOCAL_LEVEL=ESP_LOG_VERBOSE
  ${inkplate_common.build_flags}

[env:inkplate_6_extended_case_release]
; extra_scripts = pre:merge.py
extends     = inkplate_common
build_type  = release
build_flags =
  -D INKPLATE_6
  -D EXTENDED_CASE
  -D LOG_LOCAL_LEVEL=ESP_LOG_ERROR
  ${inkplate_common.build_flags}

[env:inkplate_6_extended_case_debug]
; extra_scripts = pre:merge.py
extends     = inkplate_common
build_type  = release
build_flags =
  -D INKPLATE_6
  -D EXTENDED_CASE
  -D LOG_LOCAL_LEVEL=ESP_LOG_VERBOSE
  ${inkplate_common.build_flags}

[env:inkplate_6plus_extended_case_release]
extends     = inkplate_common
build_type  = release
build_flags =
  -D INKPLATE_6PLUS
  -D EXTENDED_CASE
  -D LOG_LOCAL_LEVEL=ESP_LOG_ERROR
  ${inkplate_common.build_flags}

[env:inkplate_6plus_extended_case_debug]
extends     = inkplate_common
build_type  = release
build_flags =
  -D INKPLATE_6PLUS
  -D EXTENDED_CASE
  -D LOG_LOCAL_LEVEL=ESP_LOG_VERBOSE
  ${inkplate_common.build_flags}

[env:inkplate_10_extended_case_release]
extends     = inkplate_common
build_type  = release
build_flags =
  -D INKPLATE_10
  -D EXTENDED_CASE
  -D LOG_LOCAL_LEVEL=ESP_LOG_ERROR
  ${inkplate_common.build_flags}

[env:inkplate_10_extended_case_debug]
extends     = inkplate_common
build_type  = release
build_flags =
  -D INKPLATE_10
  -D EXTENDED_CASE
  -D LOG_LOCAL_LEVEL=ESP_LOG_VERBOSE
  ${inkplate_common.build_flags}
